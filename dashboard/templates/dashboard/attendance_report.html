{% extends 'dashboard/base.html' %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'dashboard/css/attendance_report.css' %}">
{% endblock head %}

{% block heading %}Unit Attendance Report{% endblock heading %}

{% block body %}

<div class="content-area">
    <div class="report-card">
        <div class="card-header attendance-header">
            <h2 class="placeholder-title">Cadet Performance Report</h2>
            <p class="attendance-subtitle">Detailed attendance breakdown by cadet</p>
        </div>

        <div class="report-table-wrapper">
            <table class="report-table">
                <thead>
                    <tr>
                        <th>Cadet</th>
                        <th class="text-center">Total Events</th>
                        <th class="text-center">Present</th>
                        <th class="text-center">Absent</th>
                        <th class="text-right">Attendance %</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cadet in cadets %}
                    <tr>
                        <td>
                            <div class="user-info">
                                <div class="avatar-circle">
                                    {{ cadet.username|slice:":1"|upper }}
                                </div>
                                <div class="user-meta">
                                    <span class="user-name">{{ cadet.get_full_name|default:cadet.username }}</span>
                                    <span class="user-id">ID: {{ cadet.id }}</span>
                                </div>
                            </div>
                        </td>
                        
                        <td class="text-center">{{ cadet.total_events }}</td>
                        
                        <td class="text-center val-present">
                            {{ cadet.present_count }}
                        </td>
                        
                        <td class="text-center val-absent">
                            {{ cadet.absent_count }}
                        </td>
                        
                        <td class="text-right">
                            <span class="pct-badge 
                                {% if cadet.percentage >= 75 %}pct-good
                                {% elif cadet.percentage >= 50 %}pct-avg
                                {% else %}pct-bad{% endif %}">
                                {{ cadet.percentage }}%
                            </span>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center" style="padding: 30px; color: #888;">
                            No attendance data available.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock body %}